<h2>第 {{ inning }} 局{{ '上' if is_top else '下' }}｜出局數：{{ outs }}</h2>
<form method="post">
    <label>目前投手：</label>
    <select name="pitcher_id">
        {% for p in pitchers %}
        <option value="{{ p.id }}" {% if p.id==curr_pitcher_id %}selected{% endif %}>{{ p.name }}</option>
        {% endfor %}
    </select>
    <label>打席球員（對方）</label>
    <input name="batter_name" value="{{ last_batter_name }}">
    <label>好球：</label><input name="strike" type="number" min="0" max="3" value="0">
    <label>壞球：</label><input name="ball" type="number" min="0" max="4" value="0">
    <label>本打席投球：</label><input name="pitch_count" type="number" min="1" value="1">
    <label>打席結果：</label>
    <select name="result">
        <option value="三振">三振</option>
        <option value="四壞">四壞</option>
        <option value="觸身">觸身</option>
        <option value="內滾">內滾</option>
        <option value="內飛">內飛</option>
        <option value="犧牲">犧牲</option>
        <option value="外飛">外飛</option>
        <option value="雙殺">雙殺</option>
        <option value="內安">內安</option>
        <option value="一安">一安</option>
        <option value="二安">二安</option>
        <option value="三安">三安</option>
        <option value="全壘">全壘</option>
        <option value="失誤">失誤</option>
    </select>
    <label>失分：</label><input name="runs" type="number" min="0" value="0">
    <button type="submit">記錄打席</button>
</form>

<table border="1">
    <tr>
        <th>打席</th><th>投手</th><th>對方打者</th><th>好球</th><th>壞球</th><th>投球數</th><th>結果</th><th>失分</th>
    </tr>
{% for record in inning_records %}
<tr>
    <td>{{ loop.index }}</td>
    <td>{{ record.pitcher.name if record.pitcher else '' }}</td>
    <td>{{ record.batter_name }}</td>
    <td>{{ record.strike }}</td>
    <td>{{ record.ball }}</td>
    <td>{{ record.pitch_count }}</td>
    <td>{{ record.result }}</td>
    <td>{{ record.runs }}</td>
</tr>
{% endfor %}

</table>
<p>本投手累計球數：{{ pitcher_pitch_count }}</p>
<p>本局總球數：{{ total_pitch_this_inning }}</p>
<p>全場總球數：{{ total_pitch_all }}</p>

{% if outs >= 3 %}
<p>三出局，自動進入進攻紀錄頁。</p>
<script>
    setTimeout(function(){
        window.location = "{{ url_for('record_atbat', game_id=game_id, order=0, inning=inning+1) }}";
    }, 1200)
</script>
{% endif %}

<form action="{{ url_for('index') }}" style="display:inline;">
  <button type="submit">返回首頁</button>
</form>

